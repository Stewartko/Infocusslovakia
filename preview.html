<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Preview — protected</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --bg:#0b0f14; --panel:#121821; --text:#eaf0f6; --muted:#9aa8b7; --accent:#59c1ff;
      --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Helvetica Neue",sans-serif;
      color:var(--text); background:#000; line-height:1.6;
    }

    /* full-viewport stage */
    .stage{position:fixed; inset:0; display:grid; place-items:center; background:#000; overflow:hidden}
    .frame{
      position:relative; width:min(92vw, 1200px); aspect-ratio:16/9; background:#000;
      border:1px solid rgba(255,255,255,.08); border-radius:18px; box-shadow:var(--shadow); overflow:hidden;
    }
    .frame video{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; filter:saturate(108%) contrast(104%) brightness(1.02)}

    /* pulzujúci watermark (logo v rohu) */
    .wm{
      position:absolute; right:16px; bottom:14px; z-index:2;
      width:min(16vw, 150px); opacity:.75; pointer-events:none; user-select:none;
      filter:drop-shadow(0 1px 2px rgba(0,0,0,.6));
      animation: wmPulse 3.2s ease-in-out infinite;
    }
    @keyframes wmPulse{
      0%,100%{ opacity:.38; transform:translateY(0) }
      50%    { opacity:.82; transform:translateY(-1px) }
    }

    /* voliteľný diagonálny textový watermark cez celú plochu (jemný) */
    .wm-tilt{
      position:absolute; inset:-20% -10%; z-index:1; pointer-events:none; opacity:.07;
      display:grid; place-items:center; transform:rotate(-18deg);
      font-weight:700; font-size: clamp(34px, 8vw, 72px); letter-spacing:.12em; color:#fff;
      animation: tiltPulse 4.5s ease-in-out infinite;
      text-align:center; line-height:1.1;
    }
    @keyframes tiltPulse{
      0%,100%{ opacity:.05 }
      50%    { opacity:.10 }
    }

    /* top info bar */
    .bar{
      position:fixed; left:0; right:0; top:0; height:52px; display:flex; align-items:center; justify-content:center;
      gap:12px; padding:0 14px; z-index:10;
      background:linear-gradient(180deg, rgba(15,23,34,.85), rgba(15,23,34,.55));
      backdrop-filter: blur(8px) saturate(120%);
      color:var(--text); border-bottom:1px solid rgba(255,255,255,.08);
    }
    .bar small{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,#1a222e,#101722);color:var(--text);text-decoration:none;font-weight:600}
    .btn:hover{border-color:color-mix(in oklab,var(--accent) 40%, white 0%)}

    /* access denied */
    .denied{
      position:fixed; inset:0; display:grid; place-items:center; padding:24px; background:radial-gradient(1200px 800px at 80% -10%, #0f1822 0%, #0b0f14 50%, #0b0f14 100%);
      text-align:center;
    }
    .card{
      max-width:600px; background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:20px; box-shadow:var(--shadow)
    }
    .card h1{margin:0 0 8px; font-size:1.6rem}
    .card p{margin:0 0 12px; color:var(--muted)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
  </style>
</head>
<body>

  <!-- top status/info bar -->
  <div class="bar" id="topbar" hidden>
    <small>Preview only — watermark zapnutý</small>
    <a class="btn" href="kontakt.html">Kontakt</a>
  </div>

  <!-- hlavný obsah: video s pulzujúcim WM -->
  <main class="stage" id="stage" hidden>
    <div class="frame">
      <video id="v" autoplay muted loop playsinline preload="metadata" src="assets/web-loop.mp4" poster="assets/poster-web.jpg"></video>
      <!-- rohové logo -->
      <img class="wm" src="assets/logo.svg" alt="watermark">
      <!-- diagonálny jemný text (možné vypnúť zmazaním) -->
      <div class="wm-tilt">INFOCUSSLOVAKIA • PREVIEW</div>
    </div>
  </main>

  <!-- fallback pre zlý/žiadny kľúč -->
  <section class="denied" id="denied">
    <div class="card">
      <h1>Access denied</h1>
      <p>Táto stránka je dostupná len cez špeciálny odkaz.</p>
      <p class="mono">Missing or invalid <strong>?k=</strong> token.</p>
      <p style="margin-top:10px"><a class="btn" href="index.html">Späť na hlavnú</a></p>
    </div>
  </section>

  <script>
    /*
      Jednoduchá „ochrana“ pre statický web:
      - stránka sa zobrazí len ak URL obsahuje správny token ?k=...
      - NEJDE o skutočné zabezpečenie, len o zdieľateľný „tajný link“.
      - Zmeň si PREVIEW_KEY a pošli link: preview.html?k=TVOJ_TOKEN
    */
    const PREVIEW_KEY = 'infocus-2025-preview'; // ← nastav si vlastný token

    const qs = new URLSearchParams(location.search);
    const ok = qs.get('k') === PREVIEW_KEY;

    const stage  = document.getElementById('stage');
    const denied = document.getElementById('denied');
    const topbar = document.getElementById('topbar');
    const v      = document.getElementById('v');

    if(ok){
      stage.hidden = false;
      topbar.hidden = false;
      denied.hidden = true;

      // prevent basic save menu (iba „odstrašovač“)
      window.addEventListener('contextmenu', e => e.preventDefault());
      // auto play/pause podľa viditeľnosti
      const io = new IntersectionObserver(es=>{
        es.forEach(e=>{ if(e.isIntersecting){ v.play().catch(()=>{});} else { v.pause(); } });
      },{threshold:.25});
      io.observe(v);
    } else {
      stage.hidden = true;
      topbar.hidden = true;
      denied.hidden = false;
    }

    // Voliteľné: ak chceš token uložiť po 1. vstupe (prístup bez ?k=):
    // if(ok){ localStorage.setItem('preview_key', PREVIEW_KEY); }
    // const cached = localStorage.getItem('preview_key') === PREVIEW_KEY;
    // if(!ok && cached){ location.href = location.pathname + '?k=' + PREVIEW_KEY; }
  </script>
</body>
</html>
